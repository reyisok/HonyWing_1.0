<UserControl x:Class="HonyWing.UI.Controls.ImageUploadControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:ui="http://schemas.modernwpf.com/2019"
             mc:Ignorable="d"
             d:DesignHeight="400" d:DesignWidth="600"
             AllowDrop="True"
             Drop="OnDrop"
             DragEnter="OnDragEnter"
             DragLeave="OnDragLeave"
             DragOver="OnDragOver"
             Background="{StaticResource DarkBlueBackgroundBrush}">

    <UserControl.Resources>
        <Style x:Key="UploadAreaStyle" TargetType="Border">
            <Setter Property="BorderBrush" Value="{StaticResource DarkBlueBorderBrush}"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Background" Value="{StaticResource DarkBlueBackgroundBrush}"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="20"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="BorderBrush" Value="{StaticResource DarkBlueAccentBrush}"/>
                    <Setter Property="Background" Value="{StaticResource DarkBlueHoverBrush}"/>
                    <Setter Property="Opacity" Value="0.8"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="DragOverStyle" TargetType="Border" BasedOn="{StaticResource UploadAreaStyle}">
            <Setter Property="BorderBrush" Value="{StaticResource DarkBlueAccentBrush}"/>
            <Setter Property="Background" Value="{StaticResource DarkBlueHoverBrush}"/>
            <Setter Property="Opacity" Value="0.6"/>
        </Style>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- æ ‡é¢˜æ  -->
        <Grid Grid.Row="0" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0"
                       Text="å›¾åƒä¸Šä¼ ä¸Žé¢„è§ˆ"
                       FontSize="13"
                       FontWeight="SemiBold"
                       Foreground="{StaticResource WhiteForegroundBrush}"/>

            <StackPanel Grid.Column="1" Orientation="Horizontal">
                <Button Name="BrowseButton"
                        Content="æµè§ˆæ–‡ä»¶"
                        Style="{StaticResource DarkBlueButtonStyle}"
                        Margin="0,0,10,0"
                        Click="OnBrowseClick"/>
                <Button Name="PasteButton"
                        Content="ä»Žå‰ªè´´æ¿ç²˜è´´"
                        Style="{StaticResource DarkBlueButtonStyle}"
                        Margin="0,0,10,0"
                        Click="OnPasteClick"/>
                <Button Name="ClearButton"
                        Content="æ¸…ç©º"
                        Style="{StaticResource DarkBlueButtonStyle}"
                        Click="OnClearClick"
                        IsEnabled="False"/>
            </StackPanel>
        </Grid>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <Grid Grid.Row="1">
            <!-- ä¸Šä¼ åŒºåŸŸ -->
            <Border Name="UploadArea"
                    Style="{StaticResource UploadAreaStyle}"
                    Visibility="Visible">
                <StackPanel HorizontalAlignment="Center"
                            VerticalAlignment="Center">
                    <!-- <ui:FontIcon Glyph="&#xE8B5;"
                                 FontSize="48"
                                 Margin="0,0,0,15"
                                 Foreground="{StaticResource WhiteForegroundBrush}"/> -->
                    <TextBlock Text="ðŸ“"
                               FontSize="48"
                               Margin="0,0,0,15"
                               HorizontalAlignment="Center"
                               Foreground="{StaticResource WhiteForegroundBrush}"/>
                    <TextBlock Text="æ‹–æ‹½å›¾åƒæ–‡ä»¶åˆ°æ­¤å¤„"
                               FontSize="13"
                               Margin="0,0,0,15"
                               HorizontalAlignment="Center"
                               Foreground="{StaticResource WhiteForegroundBrush}"/>
                    <TextBlock Text="æˆ–ç‚¹å‡»'æµè§ˆæ–‡ä»¶'æŒ‰é’®é€‰æ‹©å›¾åƒ"
                               FontSize="13"
                               HorizontalAlignment="Center"
                               Foreground="{StaticResource WhiteForegroundBrush}"/>
                    <TextBlock Name="SupportedFormatsText"
                               Text="æ”¯æŒæ ¼å¼ï¼šPNG, JPG, JPEG, BMP"
                               FontSize="12"
                               HorizontalAlignment="Center"
                               Foreground="{StaticResource WhiteForegroundBrush}"/>
                </StackPanel>
            </Border>

            <!-- é¢„è§ˆåŒºåŸŸ -->
            <Grid Name="PreviewArea" Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- å›¾åƒé¢„è§ˆ -->
                <Border Grid.Row="0"
                        Background="{StaticResource DarkBlueBackgroundBrush}"
                        BorderBrush="{StaticResource DarkBlueBorderBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Margin="0,0,0,10">
                    <Grid>
                        <ScrollViewer Name="ImageScrollViewer"
                                      HorizontalScrollBarVisibility="Auto"
                                      VerticalScrollBarVisibility="Auto">
                            <Image Name="PreviewImage"
                                   Stretch="None"
                                   RenderTransformOrigin="0.5,0.5">
                                <Image.RenderTransform>
                                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                                </Image.RenderTransform>
                            </Image>
                        </ScrollViewer>

                        <!-- ç¼©æ”¾æŽ§åˆ¶æŒ‰é’® -->
                        <StackPanel Orientation="Horizontal"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Top"
                                    Margin="10"
                                    Background="{StaticResource DarkBlueBackgroundBrush}"
                                    Opacity="0.9">
                            <Button Name="ZoomOutButton"
                                    Content="0.5:1"
                                    ToolTip="ç¼©å°åˆ°50%"
                                    Style="{StaticResource DarkBlueButtonStyle}"
                                    Width="50" Height="30"
                                    Margin="2"
                                    Click="OnZoomOutClick"/>
                            <Button Name="ZoomOriginalButton"
                                    Content="1:1"
                                    ToolTip="åŽŸå§‹å°ºå¯¸"
                                    Style="{StaticResource DarkBlueButtonStyle}"
                                    Width="50" Height="30"
                                    Margin="2"
                                    Click="OnZoomOriginalClick"/>
                            <Button Name="ZoomInButton"
                                    Content="2:1"
                                    ToolTip="æ”¾å¤§åˆ°200%"
                                    Style="{StaticResource DarkBlueButtonStyle}"
                                    Width="50" Height="30"
                                    Margin="2"
                                    Click="OnZoomInClick"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- å›¾åƒä¿¡æ¯ -->
                <Expander Grid.Row="1"
                          Header="å›¾åƒä¿¡æ¯"
                          IsExpanded="True"
                          Background="{StaticResource DarkBlueBackgroundBrush}"
                          Foreground="{StaticResource WhiteForegroundBrush}">
                    <Grid Margin="10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0"
                                   Text="æ–‡ä»¶åï¼š"
                                   FontSize="12"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource WhiteForegroundBrush}"
                                   Margin="0,0,10,5"/>
                        <StackPanel Grid.Row="0" Grid.Column="1"
                                    Orientation="Horizontal"
                                    Margin="0,0,20,5">
                            <TextBox Name="FileNameEditBox"
                                     Style="{StaticResource DarkBlueTextBoxStyle}"
                                     Width="200"
                                     Margin="0,0,5,0"
                                     LostFocus="OnFileNameLostFocus"/>
                            <Button Name="RenameButton"
                                    Content="é‡å‘½å"
                                    Style="{StaticResource DarkBlueButtonStyle}"
                                    Width="60" Height="25"
                                    Click="OnRenameClick"/>
                        </StackPanel>

                        <TextBlock Grid.Row="0" Grid.Column="2"
                                   Text="æ–‡ä»¶å¤§å°ï¼š"
                                   FontSize="12"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource WhiteForegroundBrush}"
                                   Margin="0,0,10,5"/>
                        <TextBlock Grid.Row="0" Grid.Column="3"
                                   Name="FileSizeText"
                                   FontSize="12"
                                   Foreground="{StaticResource WhiteForegroundBrush}"
                                   Margin="0,0,0,5"/>

                        <TextBlock Grid.Row="1" Grid.Column="0"
                                   Text="å›¾åƒå°ºå¯¸ï¼š"
                                   FontSize="12"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource WhiteForegroundBrush}"
                                   Margin="0,0,10,5"/>
                        <TextBlock Grid.Row="1" Grid.Column="1"
                                   Name="ImageSizeText"
                                   FontSize="12"
                                   Foreground="{StaticResource WhiteForegroundBrush}"
                                   Margin="0,0,20,5"/>

                        <TextBlock Grid.Row="1" Grid.Column="2"
                                   Text="å›¾åƒæ ¼å¼ï¼š"
                                   FontSize="12"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource WhiteForegroundBrush}"
                                   Margin="0,0,10,5"/>
                        <TextBlock Grid.Row="1" Grid.Column="3"
                                   Name="ImageFormatText"
                                   FontSize="12"
                                   Foreground="{StaticResource WhiteForegroundBrush}"
                                   Margin="0,0,0,5"/>

                        <TextBlock Grid.Row="2" Grid.Column="0"
                                   Text="åˆ†è¾¨çŽ‡ï¼š"
                                   FontSize="12"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource WhiteForegroundBrush}"
                                   Margin="0,0,10,5"/>
                        <TextBlock Grid.Row="2" Grid.Column="1"
                                   Name="ResolutionText"
                                   FontSize="12"
                                   Foreground="{StaticResource WhiteForegroundBrush}"
                                   Margin="0,0,20,5"/>

                        <TextBlock Grid.Row="2" Grid.Column="2"
                                   Text="è‰²å½©æ·±åº¦ï¼š"
                                   FontSize="12"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource WhiteForegroundBrush}"
                                   Margin="0,0,10,5"/>
                        <TextBlock Grid.Row="2" Grid.Column="3"
                                   Name="ColorDepthText"
                                   FontSize="12"
                                   Foreground="{StaticResource WhiteForegroundBrush}"
                                   Margin="0,0,0,5"/>

                        <TextBlock Grid.Row="3" Grid.Column="0"
                                   Text="åˆ›å»ºæ—¶é—´ï¼š"
                                   FontSize="12"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource WhiteForegroundBrush}"
                                   Margin="0,0,10,5"/>
                        <TextBlock Grid.Row="3" Grid.Column="1"
                                   Name="CreationTimeText"
                                   FontSize="12"
                                   Foreground="{StaticResource WhiteForegroundBrush}"
                                   Margin="0,0,20,5"/>

                        <TextBlock Grid.Row="4" Grid.Column="0"
                                   Text="å¤‡æ³¨ï¼š"
                                   FontSize="12"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource WhiteForegroundBrush}"
                                   Margin="0,0,10,5"/>
                        <TextBox Grid.Row="4" Grid.Column="1"
                                 Grid.ColumnSpan="3"
                                 Name="CommentTextBox"
                                 Style="{StaticResource DarkBlueTextBoxStyle}"
                                 Height="28"
                                 TextWrapping="Wrap"
                                 AcceptsReturn="True"
                                 VerticalScrollBarVisibility="Auto"
                                 Margin="0,0,0,5"
                                 LostFocus="OnCommentLostFocus"/>

                        <TextBlock Grid.Row="5" Grid.Column="0"
                                   Text="æ–‡ä»¶è·¯å¾„ï¼š"
                                   FontSize="12"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource WhiteForegroundBrush}"
                                   Margin="0,0,10,0"/>
                        <TextBlock Grid.Row="5" Grid.Column="1"
                                   Grid.ColumnSpan="3"
                                   Name="FilePathText"
                                   FontSize="13"
                                   TextWrapping="Wrap"
                                   Foreground="{StaticResource WhiteForegroundBrush}"/>
                    </Grid>
                </Expander>
            </Grid>
        </Grid>

        <!-- æ“ä½œæŒ‰é’®æ  -->
        <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,10,0,0"
                    Name="ActionButtons"
                    Visibility="Collapsed">

            <Button Name="CopyToClipboardButton"
                    Content="å¤åˆ¶åˆ°å‰ªè´´æ¿"
                    Style="{StaticResource DarkBlueButtonStyle}"
                    Click="OnCopyToClipboardClick"/>
            <Button Name="SaveAsButton"
                    Content="å¦å­˜ä¸º"
                    Style="{StaticResource DarkBlueButtonStyle}"
                    Click="OnSaveAsClick"/>
        </StackPanel>
    </Grid>
</UserControl>
